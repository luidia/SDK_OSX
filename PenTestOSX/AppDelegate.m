//
//  AppDelegate.m
//  PenTestOSX
//
//  Created by choi on 14. 3. 19..
//  Copyright (c) 2014ë…„ choi. All rights reserved.
//

#import "AppDelegate.h"

@implementation AppDelegate

@synthesize mainWindowController;

-(void) dealloc {
    if (mainWindowController)
        [mainWindowController release];
    [super dealloc];
}
- (NSApplicationTerminateReply)applicationShouldTerminate:(NSApplication *)sender {
    [mainWindowController closeSelf];
    return NSTerminateCancel;
}
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    dispatch_queue_t aQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
    dispatch_async(aQueue, ^{
        
        dispatch_sync(dispatch_get_main_queue(), ^{
        if (mainWindowController == nil)
            mainWindowController = [[MainWindowController alloc] initWithWindowNibName:@"MainWindowController"];
            [mainWindowController.window makeKeyAndOrderFront:mainWindowController];
            [mainWindowController.window setOrderedIndex:0];
        });
    });

}
-(BOOL) applicationShouldHandleReopen:(NSApplication *)sender hasVisibleWindows:(BOOL)flag {
    if (!flag) {
        [mainWindowController.window makeKeyAndOrderFront:self];
        return YES;
    }
    return NO;
}

@end
